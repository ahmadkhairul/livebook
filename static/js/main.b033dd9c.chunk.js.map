{"version":3,"sources":["config.js","calculate.js","Book.js","serviceWorker.js","index.js"],"names":["bookWidth","bookHeight","dist","x1","y1","x2","y2","x","y","Math","sqrt","pages","html","0","1","2","3","4","5","6","7","pageWidth","from","i","x3","y3","x4","y4","x5","y5","z","display","bgPos","bgPosY","bgRad","bgHeight","bgDisplay","bgY2","r","scaleX","index","to","Book","React","useEffect","disablePageScroll","enablePageScroll","useState","setPreviousWasFinished","useSprings","length","props","set","bind","useGesture","onDrag","args","down","distance","delta","xDir","direction","movement","initial","velocity","event","xy","cancel","canceled","active","first","last","memo","side","dir","customConfig","friction","tension","clamp","precision","config","onRest","immediate","offsetLeft","document","getElementById","needFinishTurn","onFinishTurnFromLeft","console","log","onRestFnRight","rotationParams","clientX","clientY","offsetTop","result","movementStartX","movementStartY","cursorX","cursorY","startX","startY","l","slope","mx","my","z0x","z0y","z0","z1x","z1y","z1","A","B","C","reflectX","reflectY","u0x","u0y","u1x","u1y","angle","atan2","PI","d1","d2","calculate","memoRotationParams","result2","setBg","b","abs","a","atan","onScroll","state","onHover","hovering","content","map","key","div","style","zIndex","backgroundColor","backgroundPositionX","backgroundImage","interpolate","value","WebkitClipPath","undefined","transformOrigin","transform","className","dangerouslySetInnerHTML","__html","id","width","height","Boolean","window","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b033dd9c.chunk.js","sourcesContent":["export const bookWidth = 600;\nexport const bookHeight = 400;\n","import { bookWidth, bookHeight } from \"./config\";\n\nexport function calculate(\n  side,\n  clientX,\n  clientY,\n  initial,\n  down,\n  needFinishTurn,\n  movement\n) {\n  const offsetLeft = document.getElementById(\"book-container\").offsetLeft;\n  const offsetTop = document.getElementById(\"book-container\").offsetTop;\n  const result = {};\n  const pageWidth = bookWidth / 2;\n\n  const movementStartX = initial[0] - offsetLeft;\n  const movementStartY = initial[1] - offsetTop;\n\n  let cursorX = clientX - offsetLeft;\n  let cursorY = clientY - offsetTop;\n\n  if (cursorX > bookWidth) {\n    cursorX = bookWidth;\n  } else if (cursorX < 0) {\n    cursorX = 0;\n  }\n  if (cursorY > bookHeight) {\n    cursorY = bookHeight;\n  } else if (cursorY < 0) {\n    cursorY = 0;\n  }\n\n  let startX = side === \"right\" ? bookWidth : 0;\n  let startY = movementStartY;\n  let l = side === \"right\" ? bookWidth - movementStartX : movementStartX;\n\n  if (l > movementStartY) {\n    startX = movementStartX;\n    startY = 0;\n    l = movementStartY;\n  }\n  if (l > bookHeight - movementStartY) {\n    startX = movementStartX;\n    startY = bookHeight;\n  }\n  if (startX > bookWidth) {\n    startX = bookWidth;\n  } else if (startX < 0) {\n    startX = 0;\n  }\n  if (side === \"right\" && cursorX > startX) {\n    startX = cursorX + 1;\n  } else if (side === \"left\" && cursorX < startX) {\n    startX = cursorX - 1;\n  }\n\n  const slope = (cursorX - startX) / (startY - cursorY);\n\n  const mx = (cursorX + startX) / 2;\n  const my = (cursorY + startY) / 2;\n  let z0x = -my / slope + mx;\n  let z0y = 0;\n  let z0 = 0;\n\n  if (side === \"right\") {\n    if (z0x > bookWidth) {\n      z0x = bookWidth;\n      z0y = slope * (bookWidth - mx) + my;\n      z0 = 1;\n    }\n\n    if (z0x < pageWidth) {\n      z0x = pageWidth;\n    }\n  } else if (side === \"left\") {\n    if (z0x < 0) {\n      z0x = 0;\n      z0y = -slope * mx + my;\n      z0 = 1;\n    }\n\n    if (z0x > pageWidth) {\n      z0x = pageWidth;\n    }\n  }\n\n  let z1x = (bookHeight - my) / slope + mx;\n  let z1y = bookHeight;\n  let z1 = 0;\n\n  if (side === \"right\") {\n    if (z1x > bookWidth) {\n      z1x = bookWidth;\n      z1y = slope * (bookWidth - mx) + my;\n      z1 = 1;\n    }\n    if (z1x < pageWidth) {\n      z1x = pageWidth;\n    }\n  } else if (side === \"left\") {\n    if (z1x < 0) {\n      z1x = 0;\n      z1y = -slope * mx + my;\n      z1 = 1;\n    }\n    if (z1x > pageWidth) {\n      z1x = pageWidth;\n    }\n  }\n\n  const A = z1y - z0y;\n  const B = z0x - z1x;\n  const C = -(A * z0x + B * z0y);\n\n  //http://www.sdmath.com/math/geometry/reflection_across_line.html\n  function reflectX(x, y) {\n    return ((B * B - A * A) * x - 2 * A * B * y - 2 * A * C) / (A * A + B * B);\n  }\n\n  function reflectY(x, y) {\n    return ((A * A - B * B) * y - 2 * A * B * x - 2 * B * C) / (A * A + B * B);\n  }\n\n  let u0x = reflectX(side === \"right\" ? bookWidth : 0, 0);\n  let u0y = reflectY(side === \"right\" ? bookWidth : 0, 0);\n  let u1x = reflectX(side === \"right\" ? bookWidth : 0, bookHeight);\n  let u1y = reflectY(side === \"right\" ? bookWidth : 0, bookHeight);\n\n  result.z0x = z0x;\n  result.z0y = z0y;\n  result.z1x = z1x;\n  result.z1y = z1y;\n\n  let angle = Math.atan2(u1y - u0y, u1x - u0x) - Math.PI / 2;\n\n  const d1 = dist(z0x, z0y, u0x, u0y);\n  const d2 = dist(z1x, z1y, u1x, u1y);\n\n  result.x = side === \"right\" ? u0x : u0x - pageWidth;\n  result.y = u0y;\n\n  result.r = angle;\n  result.display = \"block\";\n\n  result.z0 = z0;\n  result.z1 = z1;\n\n  if (z0 === 0 && z1 === 0) {\n    if (side === \"right\") {\n      result.x1 = 0;\n      result.y1 = 0;\n      result.x2 = d1;\n      result.y2 = 0;\n      result.x3 = d2;\n      result.y3 = bookHeight;\n      result.x4 = 0;\n      result.y4 = bookHeight;\n    } else {\n      result.x1 = pageWidth - d1;\n      result.y1 = 0;\n      result.x2 = pageWidth;\n      result.y2 = 0;\n      result.x3 = pageWidth;\n      result.y3 = bookHeight;\n      result.x4 = pageWidth - d2;\n      result.y4 = bookHeight;\n    }\n  } else if (z0 === 1) {\n    if (side === \"right\") {\n      result.x1 = 0;\n      result.y1 = d1;\n      result.x2 = d2;\n      result.y2 = bookHeight;\n      result.x3 = 0;\n      result.y3 = bookHeight;\n      result.x4 = result.x3;\n      result.y4 = result.y3;\n    } else {\n      result.x1 = pageWidth;\n      result.y1 = d1;\n      result.x2 = pageWidth - d2;\n      result.y2 = bookHeight;\n      result.x3 = pageWidth;\n      result.y3 = bookHeight;\n      result.x4 = result.x3;\n      result.y4 = result.y3;\n    }\n  } else if (z1 === 1) {\n    if (side === \"right\") {\n      result.x1 = 0;\n      result.y1 = 0;\n      result.x2 = d1;\n      result.y2 = 0;\n      result.x3 = 0;\n      result.y3 = bookHeight - d2;\n      result.x4 = result.x3;\n      result.y4 = result.x3;\n    } else {\n      result.x1 = pageWidth;\n      result.y1 = 0;\n      result.x2 = pageWidth - d1;\n      result.y2 = 0;\n      result.x3 = pageWidth;\n      result.y3 = bookHeight - d2;\n      result.x4 = result.x3;\n      result.y4 = result.x3;\n    }\n  }\n\n  if (!down) {\n    if (needFinishTurn) {\n      if (side === \"right\") {\n        result.x = 0;\n        result.x1 = 0;\n        result.x2 = pageWidth;\n        result.x3 = pageWidth;\n        result.x4 = 0;\n        result.y = 0;\n        result.y1 = 0;\n        result.y2 = 0;\n        result.y3 = bookHeight;\n        result.y4 = bookHeight;\n        result.r = 0;\n        result.z0x = pageWidth;\n        result.z0y = 0;\n        result.z1x = pageWidth;\n        result.z1y = bookHeight;\n      } else {\n        result.x = pageWidth;\n        result.x1 = 0;\n        result.x2 = pageWidth;\n        result.x3 = pageWidth;\n        result.x4 = 0;\n        result.y = 0;\n        result.y1 = 0;\n        result.y2 = 0;\n        result.y3 = bookHeight;\n        result.y4 = bookHeight;\n        result.r = 0;\n        result.z0x = pageWidth;\n        result.z0y = 0;\n        result.z1x = pageWidth;\n        result.z1y = bookHeight;\n      }\n    } else {\n      // back\n      if (side === \"right\") {\n        if (z1 === 1) {\n          // top corner\n          result.y = 0;\n          result.x = bookWidth;\n          result.x2 = 0;\n          result.x3 = 0;\n          result.x4 = 0;\n          result.y1 = 0;\n          result.y2 = 0;\n          result.y3 = 0;\n          result.z0x = 0;\n          result.z0y = 0;\n          result.z1x = 0;\n          result.z1y = 0;\n        } else if (z0 === 1) {\n          result.x = bookWidth + u0x - u1x;\n          result.y = bookHeight + u0y - u1y;\n          result.x1 = 0;\n          result.y1 = bookHeight;\n          result.x2 = 0;\n          result.y2 = bookHeight;\n          result.x3 = result.x2;\n          result.x4 = result.x2;\n          result.y3 = result.y2;\n          result.y4 = result.y2;\n          result.z0x = 0;\n          result.z0y = 0;\n          result.z1x = 0;\n          result.z1y = 0;\n        } else {\n          result.r = 0;\n          result.y = 0;\n          result.x = bookWidth;\n          result.x1 = 0;\n          result.x2 = 0;\n          result.x3 = 0;\n          result.x4 = 0;\n          result.y1 = 0;\n          result.y2 = 0;\n          result.y3 = bookHeight;\n          result.y4 = bookHeight;\n          result.z0x = 0;\n          result.z0y = 0;\n          result.z1x = 0;\n          result.z1y = 0;\n        }\n      } else {\n        if (z1 === 1) {\n          // top corner\n          result.x = -pageWidth;\n          result.y = 0;\n\n          result.x1 = pageWidth;\n          result.x2 = pageWidth;\n          result.x3 = pageWidth;\n          result.x4 = pageWidth;\n          result.x5 = pageWidth;\n\n          result.y1 = 0;\n          result.y2 = 0;\n          result.y3 = 0;\n          result.y4 = 0;\n          result.y5 = 0;\n\n          result.z0x = 0;\n          result.z0y = 0;\n          result.z1x = 0;\n          result.z1y = 0;\n        } else if (z0 === 1) {\n          // bottom corner\n          result.x = -pageWidth;\n          result.x1 = pageWidth;\n          result.x2 = pageWidth;\n          result.x3 = pageWidth;\n          result.x4 = pageWidth;\n          result.x5 = pageWidth;\n\n          result.y = bookHeight;\n          result.y1 = 0;\n          result.y2 = 0;\n          result.y3 = 0;\n          result.y4 = 0;\n          result.y5 = 0;\n\n          result.z0x = 0;\n          result.z0y = bookHeight;\n          result.z1x = 0;\n          result.z1y = bookHeight;\n        } else {\n          result.r = 0;\n          result.y = 0;\n          result.x = -pageWidth;\n          result.x1 = pageWidth;\n          result.x2 = pageWidth;\n          result.x3 = pageWidth;\n          result.x4 = pageWidth;\n          result.y1 = 0;\n          result.y2 = 0;\n          result.y3 = bookHeight;\n          result.y4 = bookHeight;\n\n          result.z0x = 0;\n          result.z0y = 0;\n          result.z1x = 0;\n          result.z1y = bookHeight;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction dist(x1, y1, x2, y2) {\n  const x = x1 - x2;\n  const y = y1 - y2;\n  return Math.sqrt(x * x + y * y);\n}\n","import React, { useState } from \"react\";\nimport {\n  useSprings,\n  animated,\n  interpolate\n} from \"react-spring\";\nimport { useGesture } from \"react-use-gesture\";\nimport { bookWidth, bookHeight } from \"./config\";\nimport { calculate } from \"./calculate\";\n\nimport { disablePageScroll, enablePageScroll } from \"scroll-lock\";\n\nimport \"./book.scss\";\n\nconst pages = [\"brown\", \"white\", \"white\", \"white\", \"white\", \"white\", \"white\", \"brown\"];\n\nconst html = {\n  0: \"<div class=\\\"title\\\"><h1>Halloween's stories</h1><img src='https://raw.githubusercontent.com/pylnata/livebook/master/public/images/0.png' /></div>\",\n  1: `<p class=\"number\">1</p>\n\n  <h3>The Legend of Bride's Head Bridge</h3>\n\n  <p>There's a bridge near Hanover in Germany called 'Der Kopf der Braut', which means bride's head.  A 15th century legend has it that Reichsgraf von Kesselstatt and his bride Gretchen were approaching the bridge in their horse and carriage when their way was blocked by an elderly crone.</p><p>The Reichsgraf or 'Count' ordered the old lady to get off the bridge instantly and make way for their carriage.  But it was dark, and the old lady had difficulty in herding her sheep off the bridge.</p>\n  <p>Because the old witch was moving none to fast, Reichsgraf von Kesselstatt took his whip and have her\n  a sound thrashing. </p>\n  `,\n  2: `<p class=\"number right\">2</p>\n  <p> Bleeding, and cowering in a ditch, the old witch put a curse on the carriage.  Consequently when the bridal party eventually crossed the bridge, one of the horses shied and the other reared up.  </p>\n    <p><img src='https://raw.githubusercontent.com/pylnata/livebook/master/public/images/1.jpg' /></p>\n  <p>\n  The upshot was that Gretchen was thrown from the carriage into the river below. It seems certain that she drowned as the river was in torrent and Gretchen was never seen again.\n  </p>\n  `,\n  3: `<p class=\"number\">3</p>\n  <p>However, it is said by Hanoverian wicca that at Halloween you can see a headless bride standing on rocks in the middle of the river.  Some say she is looking for her lost head, while other say she is looking for her beloved Reichsgraf von Kesselstatt.</p>\n\n\n  <p><img src='https://raw.githubusercontent.com/pylnata/livebook/master/public/images/5.png' /></p>\n\n\n  `,\n  4: `\n    <p class=\"number right\">4</p>\n\n    <h3>Uncle John's Halloween Story</h3>\n    <p>\n    When I was a boy, each year as the nights began to draw in, my uncle John would tell we kids this Halloween story.  It was a tale about a trick that he played in a graveyard.  One night Uncle John spotted his great friend Eddie weaving his way home from the village pub.  As John watched, he saw Eddie open the church's litch gate and take the shortcut through the graveyard.\n    </p>\n\n    <p>\n  There was no doubt that Eddie was the worse for wear, and appeared disoriented, really he should have taken the longer route home via the round ring.  But then he cried out to nobody in particular, 'Where am I?'\n</p>\n  `,\n  5: `\n  <p class=\"number\">5</p>\n  <p>\n  John replied instantly, 'Amongst the living'.\n  </p><p>\n  'Where are you?' cried Eddie'; to which John replied in his most sepulchral voice, 'Amongst the dead'.\n  </p>\n\n  <p>\n  Eddie sobered up instantly, rushed back the way he came, and took the long way around the churchyard.  This time he preferring to go passed the round ring, rather than stay a minute longer amongst the spirits of the gravestones.\n    </p>`,\n  6: `\n  <p class=\"number right\">6</p>\n  <p>Stories are from <a href=\"https://www.funny-jokes.com\">https://www.funny-jokes.com</a></p>\n  `,\n  7: `<center style=\"margin: 60px auto; color: #fff;\">&copy; 2019 <a style=\"color:#fff;\" href=\"http://github.com/pylnata\">github.com/pylnata</a></center>`\n};\n\nlet pageWidth = bookWidth / 2;\n\nconst from = i => ({\n  x: pageWidth,\n  y: 0,\n  x1: 0,\n  y1: 0,\n  x2: pageWidth,\n  y2: 0,\n  x3: pageWidth,\n  y3: bookHeight,\n  x4: 0,\n  y4: bookHeight,\n  x5: 0,\n  y5: bookHeight,\n  z: i === 0 ? 2 : i >= 2 ? 0 : 1,\n  display: i <= 2 ? \"block\" : \"none\",\n  bgPos: 0,\n  bgPosY: 0,\n  bgRad: 0,\n  bgHeight: bookHeight,\n  bgDisplay: \"none\",\n  bgY2: 0,\n  r: 0,\n  scaleX: 1,\n  index: 0\n});\n\nconst to = from;\n\nconst Book = () => {\n\n  //const bind2 = useScroll(state => {return false}, { domTarget: window })\n  //React.useEffect(bind2, [bind2])\n\n  React.useEffect(() => {\n    disablePageScroll();\n    return () => {\n      enablePageScroll();\n    };\n  }, []);\n\n  // TODO: disable drag until previous action is'nt finshed\n  const [previousWasFinished, setPreviousWasFinished] = useState(true);\n\n  const [props, set] = useSprings(pages.length, i => ({\n    ...to(i),\n    from: from(i)\n  }));\n\n// TODO: on hover make bottom corner of first page flipping\n  const onHoverHandler = ({ hovering, down }) => {\n    return false;\n    if (hovering) {\n      if (down) return false;\n\n      /*\n      let offsetLeft = document.getElementById(\"book-container\").offsetLeft;\n      let offsetTop = document.getElementById(\"book-container\").offsetTop;\n      let rotationParams = calculate(\n        'right',\n        [bookWidth + offsetLeft - 45, bookHeight + offsetTop - 45],\n        [bookWidth + offsetLeft, bookHeight + offsetTop],\n        true,\n        false,\n        [-45, -45]\n      );\n*/\n/*\n      let rotationParams = {\n        display: \"block\", // TODO calculate\n        r: 1.553702725929675,\n        x: 1332.9135135135134,\n        x1: 0,\n        x2: 65.87288135593212,\n        x3: 0,\n        x4: 0,\n        y: 523.8810810810819,\n        y1: 532.9913793103448,\n        y2: 600,\n        y3: 600,\n        y4: 600,\n        z0: 1,\n        z0x: 800,\n        z0y: 532.9913793103449,\n        z1: 0,\n        z1x: 734.1271186440678,\n        z1y: 600\n      };\n\n      set(i => {\n        if (i === 0) {\n          let x2 = pageWidth;\n          let y2 = 0;\n          let x3 = rotationParams.z0x - pageWidth;\n          let y3 = rotationParams.z0y;\n          let x4 = rotationParams.z1x - pageWidth;\n          let y4 = rotationParams.z1y;\n          let x5 = 0;\n          let y5 = bookHeight;\n\n          return {\n            ...to,\n            immediate: true,\n            display: \"block\",\n            x: pageWidth,\n            x2,\n            y2,\n            x3,\n            y3,\n            x4,\n            y4,\n            x5,\n            y5\n          };\n        }\n        if (i === 1) {\n          return {\n            ...to,\n            immediate: true,\n            display: \"block\",\n            z: 2,\n            ...rotationParams\n          };\n        }\n      });\n    } else {\n      set(i => {\n        return i => to(i);\n      });\n*/\n    }\n  };\n\n  const onDragHandler = ({\n    args: [index],\n    down,\n    delta: [xDelta],\n    distance,\n    direction: [xDir],\n    movement,\n    velocity,\n    event,\n    initial,\n    cancel,\n    canceled,\n    active,\n    first,\n    last,\n    xy,\n    memo\n  }) => {\n    //if (!previousWasFinished) return;\n\n    if (distance === 0) return;\n    const dir = xDir < 0 ? -1 : 1;\n\n    let bgPos = 0;\n    let bgRad = 0;\n    let bgDisplay = \"none\";\n    let bgPosY = 0;\n    let bgY2 = 0;\n    let bgHeight = bookHeight;\n    const customConfig = {\n      friction: 0,\n      tension: down ? 0 : 100, // TODO find optimal params\n      clamp: true,\n      precision: 0,\n    };\n\n    const to = {\n      x: pageWidth,\n      y: 0,\n      x1: 0,\n      y1: 0,\n      x2: pageWidth,\n      y2: 0,\n      x3: pageWidth,\n      y3: bookHeight,\n      x4: 0,\n      y4: bookHeight,\n      x5: 0,\n      y5: bookHeight,\n      z: 1,\n      bgPos: 0,\n      bgPosY: 0,\n      bgRad: 0,\n      bgY2: 0,\n      bgHeight: bookHeight,\n      bgDisplay: \"none\",\n      display: \"none\",\n      config: customConfig,\n      onRest: null,\n      immediate: false,\n      r: 0,\n      scaleX: 1,\n      index\n    };\n\n    //if (!previousWasFinished && down) return;\n\n    let side;\n    let offsetLeft = document.getElementById(\"book-container\").offsetLeft;\n    if (initial[0] - offsetLeft <= pageWidth) side = \"left\";\n    else if (initial[0] - offsetLeft > pageWidth) side = \"right\";\n    else if (dir === -1) side = \"right\";\n    else side = \"left\";\n\n    const needFinishTurn =\n      !down &&\n      ((movement[0] > 100 && side === \"left\") ||\n        (movement[0] < -100 && side === \"right\"));\n\n    // FOR TEST\n    //setPreviousWasFinished(true);\n    //if (!down) return;\n\n    setPreviousWasFinished(false);\n\n    const onFinishTurnFromRight = () => {\n      set(i => {\n        if (i === index)\n          return {\n            ...to,\n            z: 2,\n            display: \"none\",\n            x: 0,\n            immediate: true\n          };\n        if (i === index + 1)\n          return {\n            ...to,\n            z: 1,\n            x: 0,\n            display: \"block\",\n            immediate: true\n          };\n        if (i === index + 2)\n          return {\n            ...to,\n            z: 1,\n            display: \"block\",\n            immediate: true\n          };\n        if (i === index - 1)\n          return {\n            ...to,\n            x: 0,\n            z: 0,\n            display: \"block\",\n            immediate: true\n          };\n\n          if(i === index+4) {\n            return {\n              ...to,\n              x: pageWidth,\n              z: 0,\n              display: \"block\",\n              immediate: true\n            };\n          }\n        return { ...to, z: 0, display: \"none\", immediate: true };\n      });\n\n      console.log(\"finished-right\");\n      setPreviousWasFinished(true);\n    };\n\n    const onFinishTurnFromLeft = () => {\n      set(i => {\n        if (i === index)\n          return {\n            ...to,\n            z: 2,\n            x: pageWidth,\n            immediate: true,\n            display: \"none\"\n          };\n        if (i === index - 1)\n          return {\n            ...to,\n            z: 1,\n            x: pageWidth,\n            display: \"block\",\n            immediate: true\n          };\n        if (i === index - 2)\n          return {\n            ...to,\n            x: 0,\n            z: 1,\n            display: \"block\",\n            immediate: true\n          };\n          if(i === index+1) {\n            return {\n              ...to,\n              x: pageWidth,\n              z: 0,\n              display: \"block\",\n              immediate: true\n            };\n          }\n        return { ...to, z: 0, display: \"none\", immediate: true };\n      });\n      console.log(\"finished-left\");\n      setPreviousWasFinished(true);\n    };\n\n    const onRestFnLeft = () => {\n      if (!down && needFinishTurn) onFinishTurnFromLeft();\n      else if (!needFinishTurn && !down) setPreviousWasFinished(true);\n    };\n\n    const onRestFnRight = x => {\n      if (!down && needFinishTurn) {\n        onFinishTurnFromRight();\n      }\n      else if (!down && !needFinishTurn) {\n        setPreviousWasFinished(true);\n      }\n    };\n\n    let rotationParams = calculate(\n      side,\n      xy[0],\n      xy[1],\n      initial,\n      down,\n      needFinishTurn,\n      movement\n    );\n\n    let memoRotationParams = rotationParams;\n\n    //if (down) console.log(rotationParams);\n\n    set(i => {\n      let x1 = 0;\n      let y1 = 0;\n      let x2 = 0;\n      let y2 = 0;\n      let x3 = 0;\n      let y3 = 0;\n      let x4 = 0;\n      let y4 = 0;\n      let x5 = 0;\n      let y5 = 0;\n\n      if (side === \"left\") {\n        if (i === index - 1) {\n          rotationParams.x5 = rotationParams.x4;\n          rotationParams.y5 = rotationParams.y4;\n\n          let result2 = {\n            ...to,\n            display: \"block\",\n            z: 2,\n            ...rotationParams,\n            bgPos: rotationParams.x1,\n            scaleX: 1,\n            onRest: () => {\n              onRestFnLeft(rotationParams.x);\n            }\n          };\n\n          if (!down && needFinishTurn) {\n            let dist = memo.z0x;\n            if (rotationParams.z0 === 1) dist = memo.z1x;\n\n            if (rotationParams.z1 === 1 || rotationParams.z0 === 1) {\n              return {\n                r: 0,\n                x: -pageWidth + dist * 2,\n                y: 0,\n                x1: pageWidth - dist,\n                y1: 0,\n                x2: pageWidth,\n                y2: 0,\n                x3: pageWidth,\n                y3: bookHeight,\n                x4: pageWidth - dist,\n                y4: bookHeight,\n                x5: pageWidth - dist,\n                y5: bookHeight,\n                immediate: true,\n                onRest: () => {\n                  set(i => {\n                    if (i === index) {\n                      dist = pageWidth; // hack\n                      return {\n                        x1: dist,\n                        y1: 0,\n                        x2: pageWidth,\n                        y2: 0,\n                        x3: pageWidth,\n                        y3: bookHeight,\n                        x4: dist,\n                        y4: bookHeight,\n                        x5: dist,\n                        y5: bookHeight,\n                        immediate: true,\n                        onRest: () => {\n                          set(i => {\n                            if (i === index) {\n                              return {\n                                x: bookWidth,\n                                display: \"none\",\n                                immediate: false,\n                                config: customConfig,\n                                x1: pageWidth,\n                                x2: pageWidth,\n                                x3: pageWidth,\n                                x4: pageWidth,\n                                x5: pageWidth\n                              };\n                            }\n                            if (i === index - 1) {\n                              let r = result2;\n                              r.onRest = () => onFinishTurnFromLeft();\n                              return r;\n                            }\n                          });\n                        }\n                      };\n                    } else return;\n                  });\n                }\n              };\n            } else return result2;\n          } else return result2;\n        } else if (index === i) {\n          if (rotationParams.z1 === 1) {\n            // top corner\n            x1 = rotationParams.z0x;\n            x2 = pageWidth;\n            x3 = pageWidth;\n            y3 = bookHeight;\n            y4 = bookHeight;\n            x5 = rotationParams.z1x;\n            y5 = rotationParams.z1y;\n\n            if (!down && !needFinishTurn) {\n              x1 = 0;\n              x5 = 0;\n              y5 = 0;\n            }\n          } else if (rotationParams.z0 === 1) {\n            // bottom corner\n            x2 = pageWidth;\n            x3 = pageWidth;\n            y3 = bookHeight;\n            x4 = rotationParams.z1x;\n            y4 = bookHeight;\n            x5 = 0;\n            y5 = rotationParams.z0y;\n          } else {\n            // normal\n            x1 = rotationParams.z0x;\n            x2 = pageWidth;\n            x3 = pageWidth;\n            y3 = bookHeight;\n            x4 = rotationParams.z1x;\n            y4 = bookHeight;\n            x5 = rotationParams.z1x;\n            y5 = bookHeight;\n          }\n\n          let result = {\n            ...to,\n            display: \"block\",\n            x: 0,\n            x1,\n            y1,\n            x2,\n            y2,\n            x3,\n            y3,\n            x4,\n            y4,\n            x5,\n            y5\n          };\n\n          if (\n            !down &&\n            needFinishTurn &&\n            (rotationParams.z1 === 1 || rotationParams.z0 === 1)\n          ) {\n            //            let dist = memo.z0x;\n            //            if (rotationParams.z0 === 1) dist = memo.z1x;\n            let dist = pageWidth; // hack\n            return {\n              r: 0,\n              x: 0,\n              y: 0,\n              x1: dist,\n              x4: dist,\n              y1: 0,\n              x2: pageWidth,\n              y2: 0,\n              x3: pageWidth,\n              y3: bookHeight,\n              y4: bookHeight,\n              x5: dist,\n              y5: bookHeight,\n              immediate: true\n              //              onRest: () => {\n              //                onFinishTurnFromLeft()\n              //              }\n            };\n          } else return result;\n        } else if (i === index - 2) {\n          return { ...to, x: 0, display: \"block\" };\n        } else if (i === index + 1) {\n          return { bgDisplay: \"none\" };\n        } else return;\n      }\n      // WORK ON RIGHT SIDE\n      else if (side === \"right\") {\n        if (index === i) {\n          let setBg = false;\n          if (rotationParams.z1 === 1) {\n            // top corner\n            x2 = rotationParams.z0x - pageWidth;\n            x3 = rotationParams.z1x - pageWidth;\n            y3 = rotationParams.z1y;\n            x4 = pageWidth;\n            y4 = bookHeight;\n            x5 = 0;\n            y5 = bookHeight;\n\n            if (!down && !needFinishTurn) {\n              x2 = pageWidth;\n              y2 = 0;\n              x3 = pageWidth;\n              y3 = 0;\n              x4 = pageWidth;\n              y4 = bookHeight;\n              x5 = 0;\n              y5 = bookHeight;\n            }\n\n            const b = Math.abs(pageWidth - x2);\n            const a = Math.abs(bookHeight - y3);\n            bgRad = -((Math.atan(b / a) * 180) / Math.PI);\n            bgHeight = Math.sqrt(a * a + b * b);\n            bgPosY = bgHeight - bookHeight;\n            setBg = true;\n          } else if (rotationParams.z0 === 1) {\n            // bottom corner\n            x2 = pageWidth;\n            y2 = 0;\n            x3 = rotationParams.z0x - pageWidth;\n            y3 = rotationParams.z0y;\n            x4 = rotationParams.z1x - pageWidth;\n            y4 = rotationParams.z1y;\n            x5 = 0;\n            y5 = bookHeight;\n\n            if (!down && !needFinishTurn) {\n              x3 = pageWidth;\n              y3 = bookHeight;\n              x4 = pageWidth;\n              y4 = bookHeight;\n              x5 = 0;\n              y5 = bookHeight;\n            }\n          } else {\n            // normal\n            x2 = rotationParams.z0x - pageWidth;\n            x3 = rotationParams.z1x - pageWidth;\n            y3 = rotationParams.z1y;\n            y4 = bookHeight;\n            x5 = x4;\n            y5 = y4;\n\n            if (!down && !needFinishTurn) {\n              x2 = pageWidth;\n              y2 = 0;\n              x3 = pageWidth;\n              y3 = bookHeight;\n              x4 = 0;\n              y4 = bookHeight;\n              x5 = 0;\n              y5 = bookHeight;\n            }\n          }\n\n          if (!setBg) {\n            const b = Math.abs(x2 - x3);\n            const a = bookHeight;\n            bgRad = -90 + (Math.atan(a / b) * 180) / Math.PI;\n            bgHeight = Math.sqrt(a * a + b * b);\n            bgPosY = bgHeight - bookHeight;\n          }\n\n          let result = {\n            ...to,\n            display: \"block\",\n            x: pageWidth,\n            x2,\n            y2,\n            x3,\n            y3,\n            x4,\n            y4,\n            x5,\n            y5\n          };\n\n          if (\n            !down &&\n            needFinishTurn &&\n            (rotationParams.z1 === 1 || rotationParams.z0 === 1)\n          ) {\n            return {\n              r: 0,\n              x: pageWidth,\n              y: 0,\n              x1: 0,\n              y1: 0,\n              x2: pageWidth - memo.x2,\n              y2: 0,\n              x3: pageWidth - memo.x2,\n              y3: bookHeight,\n              x4: 0,\n              y4: bookHeight,\n              x5: 0,\n              y5: bookHeight,\n              immediate: true\n            };\n          } else return result;\n        } else if (i === index + 1) {\n          if (rotationParams.x3 > rotationParams.x2) bgRad = -bgRad;\n          bgPos = pageWidth - rotationParams.x2;\n          bgDisplay = \"block\";\n\n          let result = {\n            ...to,\n            display: \"block\",\n            z: 1,\n            ...rotationParams,\n            onRest: () => onRestFnRight(rotationParams.x)\n          };\n\n          //if(down)\n          //          console.log(\"to\",result);\n\n          if (!down && needFinishTurn) {\n            if (rotationParams.z1 === 1 || rotationParams.z0 === 1) {\n              return {\n                r: 0,\n                x: bookWidth - memo.x2 * 2,\n                y: 0,\n                x1: 0,\n                y1: 0,\n                x2: memo.x2,\n                y2: 0,\n                x3: memo.x2,\n                y3: bookHeight,\n                x4: 0,\n                y4: bookHeight,\n                x5: 0,\n                y5: bookHeight,\n                immediate: true,\n                onRest: () => {\n                  set(i => {\n                    if (i === index) {\n                      return {\n                        x2: pageWidth - memo.x2,\n                        x3: pageWidth - memo.x2,\n                        immediate: true,\n                        onRest: () => {\n                          set(i => {\n                            if (i === index) {\n                              return {\n                                immediate: false,\n                                config: customConfig,\n                                x2: 0,\n                                x3: 0\n                              };\n                            }\n                          });\n                        }\n                      };\n                    }\n                    if (i === index + 1) {\n                      return result;\n                    }\n                  });\n                }\n              };\n            } else return result;\n          } else return result;\n        } else if (i === index + 2) {\n          return {\n            index,\n            bgPos,\n            bgPosY,\n            bgRad,\n            bgHeight,\n            bgDisplay,\n            bgY2,\n            display: \"block\",\n            immediate: true,\n            x: index === 0 && 0 ? -movement[0] : pageWidth\n          };\n        }\n      } else return { index, onRest: null, display: \"none\", immediate: true };\n    });\n\n    if (down) {\n      return memoRotationParams;\n    }\n\n  };\n\n  const bind = useGesture(\n    {\n      onDrag: onDragHandler, // fires on drag\n      onScroll: state => {\n        return state;\n      }, // fires on scroll\n      onHover: onHoverHandler\n      //onMove: state => {console.log('move') },     // fires on mouse move over the element\n    },\n    {\n      //enabled: previousWasFinished\n    }\n  );\n\n  const content = props.map(\n    (\n      {\n        x,\n        y,\n        x1,\n        y1,\n        x2,\n        y2,\n        x3,\n        y3,\n        x4,\n        y4,\n        x5,\n        y5,\n        z,\n        bgPos,\n        bgPosY,\n        bgRad,\n        bgHeight,\n        bgDisplay,\n        bgY2,\n        display,\n        r,\n        scaleX,\n        index\n      },\n      i\n    ) => {\n      return (\n        <div key={i}>\n          <animated.div\n            key={i}\n            style={{\n              display,\n              zIndex: z,\n              backgroundColor: pages[i],\n              backgroundPositionX: 0,\n              backgroundImage:\n                (i % 2 === 1 && i !== props.length-1)\n                  ? interpolate([x2, bgRad], (x2, bgRad) => {\n                      return `linear-gradient(to right,\n         rgb(230, 230, 230) 0%,\n        rgb(255,255,255) ${(x2 * 65) / pageWidth}%,\n        rgb(230, 230, 230) ${(x2 * 80) / pageWidth}%,\n        rgb(217, 217, 217) ${(x2 * 88) / pageWidth}%,\n        rgb(255,255,255) 100%\n      )`;\n                    })\n                  : i !== index.value + 2 || true // TODO shadow move\n                  ? `linear-gradient(to right, rgba(0, 0, 0, 0.3) 0%,rgba(184, 184, 184, 0) 60px)`\n                  : null,\n              //                interpolate(\n              //                  [bgRad, bgPos],\n              //                  (bgRad, bgPos) =>\n              //                    `linear-gradient(${90+bgRad}deg, rgb(0, 0, 0, 0.3) 0%,rgba(184, 184, 184, 0) ${300-bgPos}px)`\n              //                )\n              WebkitClipPath: interpolate(\n                [x1, y1, x2, y2, x3, y3, x4, y4, x5, y5],\n                (x1, y1, x2, y2, x3, y3, x4, y4, x5, y5) => {\n                  if (x5 === undefined) x5 = x4;\n                  if (y5 === undefined) y5 = y4;\n                  return `polygon(${x1}px ${y1}px, ${x2}px ${y2}px, ${x3}px ${y3}px, ${x4}px ${y4}px, ${x5}px ${y5}px )`;\n                }\n              ),\n\n              transformOrigin: i % 2 === 0 ? pageWidth + \"px 0px\" : \"0px 0px\",\n              transform: interpolate(\n                [x, y, r, scaleX],\n                (x, y, r, scaleX) =>\n                  `translateX(${x}px) translateY(${y}px) rotate(${r}rad) scaleX(${scaleX})`\n              )\n            }}\n            className={`page page--${i} `}\n            {...bind(i)}\n          >\n            <div\n              dangerouslySetInnerHTML={{ __html: html[i] }}\n            ></div>\n          </animated.div>\n          {false && i === index.value + 2 && (\n            <animated.div\n              className=\"shadow\"\n              style={{\n                height: bgHeight,\n                display: bgDisplay,\n                left: pageWidth,\n                WebkitClipPath: interpolate(\n                  [x1, y1, x2, y2, x3, y3, x4, y4, x5, y5, bgHeight, bgY2],\n                  (x1, y1, x2, y2, x3, y3, x4, y4, x5, y5, bgHeight, bgY2) => {\n                    y3 = y4 = y5 = bgHeight;\n                    y2 = bgY2;\n                    if (x5 === undefined) x5 = x4;\n                    if (y5 === undefined) y5 = y4;\n                    return `polygon(${x1}px ${y1}px, ${x2}px ${y2}px, ${x3}px ${y3}px, ${x4}px ${y4}px, ${x5}px ${y5}px )`;\n                  }\n                ),\n                transform: interpolate(\n                  [bgRad, bgPos, bgPosY],\n                  (bgRad, bgPos, bgPosY) =>\n                    `rotate(${bgRad}deg) translateX(${bgPos}px) translateY(${bgPosY}px)`\n                )\n              }}\n            ></animated.div>\n          )}\n        </div>\n      );\n    }\n  );\n  return (\n    <>\n      <div id=\"book-container\" style={{ width: bookWidth, height: bookHeight }}>\n        {content}\n      </div>\n      <div className=\"copy\">\n      Drag page to flip\n      </div>\n    </>\n  );\n};\nexport default Book;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Book from './Book';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Book />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}